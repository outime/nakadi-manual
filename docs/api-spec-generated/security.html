
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Security Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../developing.html" />
    
    
    <link rel="prev" href="definitions.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../getting-started.html">
            
                <a href="../getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../faq.html">
            
                <a href="../faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../using.html">
            
                <a href="../using.html">
            
                    
                    Using Nakadi
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../using/concepts.html">
            
                <a href="../using/concepts.html">
            
                    
                    Concepts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../using/event-types.html">
            
                <a href="../using/event-types.html">
            
                    
                    Event Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../using/producing-events.html">
            
                <a href="../using/producing-events.html">
            
                    
                    Producing Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../using/consuming-events.html">
            
                <a href="../using/consuming-events.html">
            
                    
                    Consuming Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../using/clients.html">
            
                <a href="../using/clients.html">
            
                    
                    Client Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../using/comparison.html">
            
                <a href="../using/comparison.html">
            
                    
                    (partial) Compared to Other Systems
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="overview.html">
            
                <a href="overview.html">
            
                    
                    API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="paths.html">
            
                <a href="paths.html">
            
                    
                    Paths
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="definitions.html">
            
                <a href="definitions.html">
            
                    
                    Definitions
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.3" data-path="security.html">
            
                <a href="security.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../developing.html">
            
                <a href="../developing.html">
            
                    
                    Building and Developing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../operating.html">
            
                <a href="../operating.html">
            
                    
                    (todo) Operations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../recipes.html">
            
                <a href="../recipes.html">
            
                    
                    (todo) Recipes and Patterns
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Security</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h2 id="authorization"><a name="authorization" class="plugin-anchor" href="#authorization"><i class="fa fa-link" aria-hidden="true"></i></a>Authorization</h2>
<p>The Nakadi API can be secured using OAuth 2.0 scopes. The current model is
limited to generic scopes. The project may look to support more granular
scopes in the future such as limiting access to particular event types and streams.</p>
<p><a name="securityscheme"></a></p>
<h2 id="security"><a name="security" class="plugin-anchor" href="#security"><i class="fa fa-link" aria-hidden="true"></i></a>Security</h2>
<p><a name="oauth2"></a></p>
<h3 id="oauth2"><a name="oauth2" class="plugin-anchor" href="#oauth2"><i class="fa fa-link" aria-hidden="true"></i></a>oauth2</h3>
<p><em>Type</em> : oauth2<br><em>Flow</em> : implicit<br><em>Token URL</em> : <a href="https://auth.example.com/oauth2/tokeninfo" target="_blank">https://auth.example.com/oauth2/tokeninfo</a></p>
<table>
<thead>
<tr>
<th>Scope</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>nakadi.config.write</td>
<td>Grants access for changing Nakadi configuration.</td>
</tr>
<tr>
<td>nakadi.event_type.write</td>
<td>Grants access for applications to define and update EventTypes.</td>
</tr>
<tr>
<td>nakadi.event_stream.write</td>
<td>Grants access for applications to submit Events.</td>
</tr>
<tr>
<td>nakadi.event_stream.read</td>
<td>Grants access for consuming Event streams.</td>
</tr>
</tbody>
</table>
<p><a name="event type"></a></p>
<h3 id="event-type"><a name="event-type" class="plugin-anchor" href="#event-type"><i class="fa fa-link" aria-hidden="true"></i></a>Event Type</h3>
<h4 id="write-and-read-scopes"><a name="write-and-read-scopes" class="plugin-anchor" href="#write-and-read-scopes"><i class="fa fa-link" aria-hidden="true"></i></a>Write and read scopes</h4>
<p>Nakadi has possibility to check OAuth2 Scopes (scopes) of publisher and consumer to grant access
write and read events only for trusted applications.
In order to use this feature an event type owner is able to specify read and write
scopes for the event type:</p>
<pre><code class="lang-sh">curl -v -XPOST -H &quot;Content-Type: application/json&quot; http://localhost:8080/event-types -d &apos;{
  &quot;name&quot;: &quot;order_received&quot;,
  &quot;owning_application&quot;: &quot;acme-order-service&quot;,
  &quot;category&quot;: &quot;business&quot;,
  &quot;partition_strategy&quot;: &quot;random&quot;,
  &quot;enrichment_strategies&quot;: [&quot;metadata_enrichment&quot;],
  &quot;schema&quot;: {
    &quot;type&quot;: &quot;json_schema&quot;,
    &quot;schema&quot;: &quot;{ \&quot;properties\&quot;: { \&quot;order_number\&quot;: { \&quot;type\&quot;: \&quot;string\&quot; } } }&quot;
  }

  &quot;write_scopes&quot; : [&quot;oauth2.write.scope.one&quot;, &quot;oauth2.write.scope.two&quot;],
  &quot;read_scopes&quot; : [&quot;oauth2.read.scope.one&quot;, &quot;oauth2.read.scope.two&quot;]
}&apos;
</code></pre>
<p>Once publisher tries to write an event to <code>order_received</code>, its OAuth2 Token is examined for scopes
which are defined in <code>write_scopes</code>. For successful publishing he should have at least one of
the defined scopes.</p>
<p>The event type owner has to create scopes for the application which is owner of this event type.
Publishers, in their turn, have to request scopes for their applications, which are defined by
the event type owner, to be able to publish events.</p>
<p>Application scope validation does not occur if no write or read scopes are specified
for the event type.</p>
<p>The same is valid for event consumers.</p>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="definitions.html" class="navigation navigation-prev " aria-label="Previous page: Definitions">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../developing.html" class="navigation navigation-next " aria-label="Next page: Building and Developing">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Security","level":"1.5.3","depth":2,"next":{"title":"Building and Developing","level":"1.6","depth":1,"path":"docs/developing.md","ref":"docs/developing.md","articles":[]},"previous":{"title":"Definitions","level":"1.5.2","depth":2,"path":"docs/api-spec-generated/definitions.md","ref":"docs/api-spec-generated/definitions.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["-sharing","-search","-highlight","anchors"],"pluginsConfig":{"anchors":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"docs/api-spec-generated/security.md","mtime":"2016-12-09T09:35:52.218Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2016-12-09T09:36:58.676Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

